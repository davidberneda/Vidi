Array.Compare(a,b:Integer):Integer {
  if Self[a]<Self[b]
     return 1
  else
  if Self[a]>Self[b]
     return 2
  else
     return 0
}

Array.Sort(Ascending:Boolean) {

  Comp::= Ascending ? 2 : 1

  DoSort(l,r:Integer)
  {
    i::=l
    j::=r
    x:Integer:=(i+j)/2

    while i<j
    {
      while Compare(i,x)=Comp i += 1
      while Compare(x,j)=Comp j -= 1

      if i<j
      {
        Swap(i,j)

        if i=x
           x:=j
        else
        if j=x
           x:=i
      }

      if i<=j
      {
        i += 1
        j -= 1
      }
    }

    if l<j
       DoSort(l,j)

    if i<r
       DoSort(i,r)
  }

     DoSort(0,Count-1)
}

{
  Numbers::=[4,8,2,5]

  Console.PutLine(Numbers)
  Numbers.Sort(True)
  Console.PutLine('Ascending: ',Numbers)  // Ascending: ...
  Console.PutLine(Numbers)

  Numbers.Sort(False)
  Console.PutLine('Descending: ',Numbers) // Descending: ...
}


